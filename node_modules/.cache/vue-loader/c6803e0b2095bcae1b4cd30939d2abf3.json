{"remainingRequest":"/home/clement/VUE/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/clement/VUE/src/components/RetailerRegistration.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/clement/VUE/src/components/RetailerRegistration.vue","mtime":1607436435552},{"path":"/home/clement/VUE/node_modules/cache-loader/dist/cjs.js","mtime":1607423900684},{"path":"/home/clement/VUE/node_modules/babel-loader/lib/index.js","mtime":1607423900644},{"path":"/home/clement/VUE/node_modules/cache-loader/dist/cjs.js","mtime":1607423900684},{"path":"/home/clement/VUE/node_modules/vue-loader/lib/index.js","mtime":1607423902216}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CgpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAnUmV0YWlsZXJSZWdpc3RyYXRpb24nLAogICAgZGF0YSgpewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICBwcmV2aWV3SW1hZ2U6IG51bGwsCiAgICAgICAgICAgICAgIGltYWdlOiBudWxsLAogICAgICAgICAgICAgICBlbmNvZGVkSW1hZ2U6ICcgICcsCiAgICAgICAgICAgICAgIG5hbWVSZXRhaWxlcjogJycsCiAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgICAgICAgICAgcmV0YWlsZXJDYXRlZ29yaWVzIDogWwogICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgJ3ZhbCc6MSwKICAgICAgICAgICAgICAgICAgICdjYXQnOiAnYm91bGFuZ2VyaWUnCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAndmFsJzoyLAogICAgICAgICAgICAgICAgICAgJ2NhdCc6ICdlcGl0ZWNyaWUnCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICBpbWdUZXN0OiBudWxsLAogICAgICAgICAgICAgICBjYXQ6ICcnLCAKICAgICAgICAgICAgICAgc2VsZWN0ZWQ6ICcnCgogICAgICAgICAgICB9CiAgICB9LAogICAgbWV0aG9kczp7CiAgICAgICAgdXBsb2FkSW1hZ2UoZSl7CiAgICAgICAgICAgIGNvbnN0IGltYWdlID0gZS50YXJnZXQuZmlsZXNbMF07CiAgICAgICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGltYWdlKTsKICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGUgPT57CiAgICAgICAgICAgICAgICB0aGlzLnByZXZpZXdJbWFnZSA9IGUudGFyZ2V0LnJlc3VsdDsKICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coaW1hZ2UpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5wcmV2aWV3SW1hZ2UpOwogICAgICAgICAgICAgICAgdGhpcy5pbWFnZSA9IGltYWdlOwogICAgICAgICAgICAgICAgdGhpcy5lbmNvZGVkSW1hZ2UgPSBidG9hKGltYWdlKTsKICAgICAgICAgICAgfTsKICAgICAgICB9LAogICAgICAgIGFzeW5jIHJlZ2lzdGVyQXNSZXRhaWxlcigpIHsKICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5uYW1lUmV0YWlsZXIpOwogICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmRlc2NyaXB0aW9uKTsKICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5pbWFnZSk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZW5jb2RlZEltYWdlKTsKCiAgICAgICAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICAgICAgICBmb3JtRGF0YS5zZXQoJ2ltYWdlJywgdGhpcy5pbWFnZSk7CiAgICAgICAgICAgIAogICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBheGlvcy5wdXQoJ2h0dHBzOi8vaGF1dGUtbG9pcmUub3JnL2FwaS91c2VyLzInLCB7IC8vdmlyZXIgbGUgLzIgZXQgcmVtcGxhY2VyIHBhciBsJ2lkIGRlIGwndXNlciBjb25uZWN0w6kKICAgICAgICAgICAgICAgIHBpY3R1cmVzOiBmb3JtRGF0YSwKICAgICAgICAgICAgICAgIHN0b3JlTmFtZTogdGhpcy5uYW1lUmV0YWlsZXIsCiAgICAgICAgICAgICAgICBzdG9yZVR5cGU6IHRoaXMuc2VsZWN0ZWQsCiAgICAgICAgICAgICAgICBzdG9yZURlc2NyaXB0aW9uOiB0aGlzLmRlc2NyaXB0aW9uCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICB9LAogICAgICAgIGFzeW5jIGdldEltZygpIHsgLy8gw6Agc3VwcHJpbWVyLCBjJ8OpdGFpdCBwb3VyIHRlc3RlciBsJ2FmZmljaGFnZSBkZSBsJ2ltYWdlCiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGF4aW9zLmdldCgnaHR0cHM6Ly9oYXV0ZS1sb2lyZS5vcmcvYXBpL3VzZXIvMicpOwogICAgICAgICAgICAvL2NvbnNvbGUubG9nKHJlcy5kYXRhLnBpY3R1cmVzKTsKICAgICAgICAgICAgcmV0dXJuIHJlcy5kYXRhOwogICAgICAgIH0KICAgIH0KfQo="},{"version":3,"sources":["RetailerRegistration.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RetailerRegistration.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div>\n        <h4>Affiche formulaire inscription commerçant </h4>\n        <form  @submit.prevent=\"registerAsRetailer\">\n                <br><br><br><br>\n                <div>\n                    <label for=\"nameRetailer\">\n                        Nom : \n                    </label>\n                    <input type=\"text\" name=\"nameRetailer\" placeholder=\"Nom de votre magasin\" id=\"nameRetailer\" v-model=\"nameRetailer\">\n                </div>\n                <div>\n                    <label for=\"description\">\n                        Description : \n                    </label>\n                    <input type=\"text\" name=\"description\" placeholder=\"description\" id=\"description\" v-model=\"description\">\n                </div>\n                <div>\n                    <label for=\"Image\">\n                        Image : \n                    </label>\n                    <img :src=\"previewImage\" class=\"uploading-image\" />\n                    <input type=\"file\" accept=\"image/jpeg\" @change=uploadImage>\n                </div>\n                <div>\n                    <select v-model=\"selected\">\n                        <option v-for=\"categorie in retailerCategories\" :key=\"categorie.val\"> {{ categorie.cat }} </option>\n                        <p>{{ selected }}</p>\n                    </select>\n                </div>\n                <br>\n                <div>\n                    <button class=\"btn btn-dark\" type=\"registerRetailer\">Create a retailer account</button>\n                    \n                </div>\n        </form>\n        <div class=\"affiche\" v-bind:obj=\"getImg()\">\n            test affichage\n            {{ getImg() }}\n        </div>\n    </div>\n</template>\n\n\n<script>\nimport axios from 'axios';\n\nexport default {\n    name: 'RetailerRegistration',\n    data(){\n            return {\n               previewImage: null,\n               image: null,\n               encodedImage: '  ',\n               nameRetailer: '',\n               description: '',\n               retailerCategories : [\n                   {\n                   'val':1,\n                   'cat': 'boulangerie'\n                    },\n                    {\n                   'val':2,\n                   'cat': 'epitecrie'\n                    }\n               ],\n               imgTest: null,\n               cat: '', \n               selected: ''\n\n            }\n    },\n    methods:{\n        uploadImage(e){\n            const image = e.target.files[0];\n            const reader = new FileReader();\n            reader.readAsDataURL(image);\n            reader.onload = e =>{\n                this.previewImage = e.target.result;\n                //console.log(image);\n                console.log(this.previewImage);\n                this.image = image;\n                this.encodedImage = btoa(image);\n            };\n        },\n        async registerAsRetailer() {\n            console.log(this.nameRetailer);\n            console.log(this.description);\n            console.log(this.image);\n            console.log(this.encodedImage);\n\n            var formData = new FormData();\n            formData.set('image', this.image);\n            \n            const res = await axios.put('https://haute-loire.org/api/user/2', { //virer le /2 et remplacer par l'id de l'user connecté\n                pictures: formData,\n                storeName: this.nameRetailer,\n                storeType: this.selected,\n                storeDescription: this.description\n            });\n\n            console.log(res);\n        },\n        async getImg() { // à supprimer, c'était pour tester l'affichage de l'image\n            const res = await axios.get('https://haute-loire.org/api/user/2');\n            //console.log(res.data.pictures);\n            return res.data;\n        }\n    }\n}\n</script>"]}]}