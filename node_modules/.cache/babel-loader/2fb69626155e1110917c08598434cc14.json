{"remainingRequest":"/home/clement/VUE/node_modules/babel-loader/lib/index.js!/home/clement/VUE/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/clement/VUE/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/clement/VUE/src/components/RetailerRegistration.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/clement/VUE/src/components/RetailerRegistration.vue","mtime":1607447008836},{"path":"/home/clement/VUE/node_modules/cache-loader/dist/cjs.js","mtime":1607423900684},{"path":"/home/clement/VUE/node_modules/babel-loader/lib/index.js","mtime":1607423900644},{"path":"/home/clement/VUE/node_modules/cache-loader/dist/cjs.js","mtime":1607423900684},{"path":"/home/clement/VUE/node_modules/vue-loader/lib/index.js","mtime":1607423902216}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL2hvbWUvY2xlbWVudC9WVUUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICIvaG9tZS9jbGVtZW50L1ZVRS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdSZXRhaWxlclJlZ2lzdHJhdGlvbicsCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoe30sIG1hcEdldHRlcnMoewogICAgdXNlcjogJ2F1dGgvdXNlcicKICB9KSksCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHByZXZpZXdJbWFnZTogbnVsbCwKICAgICAgaW1hZ2U6IG51bGwsCiAgICAgIGVuY29kZWRJbWFnZTogJyAgJywKICAgICAgbmFtZVJldGFpbGVyOiAnJywKICAgICAgZGVzY3JpcHRpb246ICcnLAogICAgICByZXRhaWxlckNhdGVnb3JpZXM6IFt7CiAgICAgICAgJ3ZhbCc6IDEsCiAgICAgICAgJ2NhdCc6ICdib3VsYW5nZXJpZScKICAgICAgfSwgewogICAgICAgICd2YWwnOiAyLAogICAgICAgICdjYXQnOiAnZXBpdGVjcmllJwogICAgICB9XSwKICAgICAgaW1nVGVzdDogbnVsbCwKICAgICAgY2F0OiAnJywKICAgICAgc2VsZWN0ZWQ6ICcnCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgdXBsb2FkSW1hZ2U6IGZ1bmN0aW9uIHVwbG9hZEltYWdlKGUpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBpbWFnZSA9IGUudGFyZ2V0LmZpbGVzWzBdOwogICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoaW1hZ2UpOwoKICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgX3RoaXMucHJldmlld0ltYWdlID0gZS50YXJnZXQucmVzdWx0OyAvL2NvbnNvbGUubG9nKGltYWdlKTsKCiAgICAgICAgY29uc29sZS5sb2coX3RoaXMucHJldmlld0ltYWdlKTsKICAgICAgICBfdGhpcy5pbWFnZSA9IGltYWdlOwogICAgICAgIF90aGlzLmVuY29kZWRJbWFnZSA9IGJ0b2EoaW1hZ2UpOwogICAgICB9OwogICAgfSwKICAgIHJlZ2lzdGVyQXNSZXRhaWxlcjogZnVuY3Rpb24gcmVnaXN0ZXJBc1JldGFpbGVyKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIGZvcm1EYXRhLCByZXM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coX3RoaXMyLm5hbWVSZXRhaWxlcik7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfdGhpczIuZGVzY3JpcHRpb24pOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coX3RoaXMyLmltYWdlKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKF90aGlzMi5lbmNvZGVkSW1hZ2UpOwogICAgICAgICAgICAgICAgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgICAgICAgICAgIGZvcm1EYXRhLnNldCgnaW1hZ2UnLCBfdGhpczIuaW1hZ2UpOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDg7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucHV0KCdodHRwczovL2hhdXRlLWxvaXJlLm9yZy9hcGkvdXNlci8nICsgX3RoaXMyLnVzZXIuaWQsIHsKICAgICAgICAgICAgICAgICAgLy92aXJlciBsZSAvMiBldCByZW1wbGFjZXIgcGFyIGwnaWQgZGUgbCd1c2VyIGNvbm5lY3TDqQogICAgICAgICAgICAgICAgICBwaWN0dXJlczogZm9ybURhdGEsCiAgICAgICAgICAgICAgICAgIHN0b3JlTmFtZTogX3RoaXMyLm5hbWVSZXRhaWxlciwKICAgICAgICAgICAgICAgICAgc3RvcmVUeXBlOiBfdGhpczIuc2VsZWN0ZWQsCiAgICAgICAgICAgICAgICAgIHN0b3JlRGVzY3JpcHRpb246IF90aGlzMi5kZXNjcmlwdGlvbgogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGdldEltZzogZnVuY3Rpb24gZ2V0SW1nKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciByZXM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5nZXQoJ2h0dHBzOi8vaGF1dGUtbG9pcmUub3JnL2FwaS91c2VyLycgKyBfdGhpczMudXNlci5pZCk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIF90aGlzMy51c2VyLmlkKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["RetailerRegistration.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA,OAAA,KAAA,MAAA,OAAA;AACA,SAAA,UAAA,QAAA,MAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,sBADA;AAEA,EAAA,QAAA,oBACA,UAAA,CAAA;AACA,IAAA,IAAA,EAAA;AADA,GAAA,CADA,CAFA;AAOA,EAAA,IAPA,kBAOA;AACA,WAAA;AACA,MAAA,YAAA,EAAA,IADA;AAEA,MAAA,KAAA,EAAA,IAFA;AAGA,MAAA,YAAA,EAAA,IAHA;AAIA,MAAA,YAAA,EAAA,EAJA;AAKA,MAAA,WAAA,EAAA,EALA;AAMA,MAAA,kBAAA,EAAA,CACA;AACA,eAAA,CADA;AAEA,eAAA;AAFA,OADA,EAKA;AACA,eAAA,CADA;AAEA,eAAA;AAFA,OALA,CANA;AAgBA,MAAA,OAAA,EAAA,IAhBA;AAiBA,MAAA,GAAA,EAAA,EAjBA;AAkBA,MAAA,QAAA,EAAA;AAlBA,KAAA;AAqBA,GA7BA;AA8BA,EAAA,OAAA,EAAA;AACA,IAAA,WADA,uBACA,CADA,EACA;AAAA;;AACA,UAAA,KAAA,GAAA,CAAA,CAAA,MAAA,CAAA,KAAA,CAAA,CAAA,CAAA;AACA,UAAA,MAAA,GAAA,IAAA,UAAA,EAAA;AACA,MAAA,MAAA,CAAA,aAAA,CAAA,KAAA;;AACA,MAAA,MAAA,CAAA,MAAA,GAAA,UAAA,CAAA,EAAA;AACA,QAAA,KAAA,CAAA,YAAA,GAAA,CAAA,CAAA,MAAA,CAAA,MAAA,CADA,CAEA;;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,KAAA,CAAA,YAAA;AACA,QAAA,KAAA,CAAA,KAAA,GAAA,KAAA;AACA,QAAA,KAAA,CAAA,YAAA,GAAA,IAAA,CAAA,KAAA,CAAA;AACA,OANA;AAOA,KAZA;AAaA,IAAA,kBAbA,gCAaA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,OAAA,CAAA,GAAA,CAAA,MAAA,CAAA,YAAA;AACA,gBAAA,OAAA,CAAA,GAAA,CAAA,MAAA,CAAA,WAAA;AACA,gBAAA,OAAA,CAAA,GAAA,CAAA,MAAA,CAAA,KAAA;AACA,gBAAA,OAAA,CAAA,GAAA,CAAA,MAAA,CAAA,YAAA;AAEA,gBAAA,QANA,GAMA,IAAA,QAAA,EANA;AAOA,gBAAA,QAAA,CAAA,GAAA,CAAA,OAAA,EAAA,MAAA,CAAA,KAAA;AAPA;AAAA,uBASA,KAAA,CAAA,GAAA,CAAA,sCAAA,MAAA,CAAA,IAAA,CAAA,EAAA,EAAA;AAAA;AACA,kBAAA,QAAA,EAAA,QADA;AAEA,kBAAA,SAAA,EAAA,MAAA,CAAA,YAFA;AAGA,kBAAA,SAAA,EAAA,MAAA,CAAA,QAHA;AAIA,kBAAA,gBAAA,EAAA,MAAA,CAAA;AAJA,iBAAA,CATA;;AAAA;AASA,gBAAA,GATA;AAgBA,gBAAA,OAAA,CAAA,GAAA,CAAA,GAAA;;AAhBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAiBA,KA9BA;AA+BA,IAAA,MA/BA,oBA+BA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,KAAA,CAAA,GAAA,CAAA,sCAAA,MAAA,CAAA,IAAA,CAAA,EAAA,CADA;;AAAA;AACA,gBAAA,GADA;AAEA,gBAAA,OAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA;AAFA,kDAGA,MAAA,CAAA,IAAA,CAAA,EAHA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAnCA;AA9BA,CAAA","sourcesContent":["<template>\n    <div>\n        <h4>Affiche formulaire inscription commerçant </h4>\n        <form  @submit.prevent=\"registerAsRetailer\">\n                <br><br><br><br>\n                <div>\n                    <label for=\"nameRetailer\">\n                        Nom : \n                    </label>\n                    <input type=\"text\" name=\"nameRetailer\" placeholder=\"Nom de votre magasin\" id=\"nameRetailer\" v-model=\"nameRetailer\">\n                </div>\n                <div>\n                    <label for=\"description\">\n                        Description : \n                    </label>\n                    <input type=\"text\" name=\"description\" placeholder=\"description\" id=\"description\" v-model=\"description\">\n                </div>\n                <div>\n                    <label for=\"Image\">\n                        Image : \n                    </label>\n                    <img :src=\"previewImage\" class=\"uploading-image\" />\n                    <input type=\"file\" accept=\"image/jpeg\" @change=uploadImage>\n                </div>\n                <div>\n                    <select v-model=\"selected\">\n                        <option v-for=\"categorie in retailerCategories\" :key=\"categorie.val\"> {{ categorie.cat }} </option>\n                        <p>{{ selected }}</p>\n                    </select>\n                </div>\n                <br>\n                <div>\n                    <button class=\"btn btn-dark\" type=\"registerRetailer\">Create a retailer account</button>\n                    \n                </div>\n        </form>\n        <div class=\"affiche\" v-bind:obj=\"getImg()\">\n            test affichage\n            {{ getImg() }}\n        </div>\n    </div>\n</template>\n\n\n<script>\nimport axios from 'axios';\nimport { mapGetters } from 'vuex';\n\nexport default {\n    name: 'RetailerRegistration',\n    computed: {\n        ...mapGetters({\n            user: 'auth/user'\n        })\n    },\n    data(){\n            return {\n               previewImage: null,\n               image: null,\n               encodedImage: '  ',\n               nameRetailer: '',\n               description: '',\n               retailerCategories : [\n                   {\n                   'val':1,\n                   'cat': 'boulangerie'\n                    },\n                    {\n                   'val':2,\n                   'cat': 'epitecrie'\n                    }\n               ],\n               imgTest: null,\n               cat: '', \n               selected: ''\n\n            }\n    },\n    methods:{\n        uploadImage(e){\n            const image = e.target.files[0];\n            const reader = new FileReader();\n            reader.readAsDataURL(image);\n            reader.onload = e =>{\n                this.previewImage = e.target.result;\n                //console.log(image);\n                console.log(this.previewImage);\n                this.image = image;\n                this.encodedImage = btoa(image);\n            };\n        },\n        async registerAsRetailer() {\n            console.log(this.nameRetailer);\n            console.log(this.description);\n            console.log(this.image);\n            console.log(this.encodedImage);\n\n            var formData = new FormData();\n            formData.set('image', this.image);\n            \n            const res = await axios.put('https://haute-loire.org/api/user/'+this.user.id, { //virer le /2 et remplacer par l'id de l'user connecté\n                pictures: formData,\n                storeName: this.nameRetailer,\n                storeType: this.selected,\n                storeDescription: this.description\n            });\n\n            console.log(res);\n        },\n        async getImg() { // à supprimer, c'était pour tester l'affichage de l'image\n            const res = await axios.get('https://haute-loire.org/api/user/'+this.user.id);\n            console.log(res.data);\n            return this.user.id;\n        }\n    }\n}\n</script>"],"sourceRoot":"src/components"}]}