{"remainingRequest":"/home/clement/twp/mvvm_twp/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/clement/twp/mvvm_twp/src/views/Register.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/clement/twp/mvvm_twp/src/views/Register.vue","mtime":1607358618548},{"path":"/home/clement/twp/mvvm_twp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/clement/twp/mvvm_twp/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/clement/twp/mvvm_twp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/clement/twp/mvvm_twp/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vaW1wb3J0IHttYXBBY3Rpb25zfSBmcm9tICd2dWV4JzsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnUmVnaXN0ZXInLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICAgIG5hbWU6ICcnLAogICAgICAgIGZpcnN0TmFtZTogJycsCiAgICAgICAgbGFzdE5hbWU6ICcnLAogICAgICAgIGFkcmVzczogJycsCiAgICAgICAgcG9zdENvZGU6ICcnLAogICAgICAgIGNpdHk6ICcnLAogICAgICAgIGVtYWlsOiAnJywKICAgICAgICBwYXNzd29yZDogJycsCiAgICAgICAgcGFzc3dvcmRDb25maXJtYXRpb246ICcnCiAgICB9CiAgfSwgCiAgbWV0aG9kczogewogICAgICBhc3luYyByZWdpc3RlcigpIHsKICAgICAgICBpZiAoCiAgICAgICAgdGhpcy5lbWFpbFZhbGlkYXRpb24odGhpcy5lbWFpbCkgJiYgCiAgICAgICAgdGhpcy5wYXNzd29yZFZhbGlkYXRpb24odGhpcy5wYXNzd29yZCkgJiYgCiAgICAgICAgdGhpcy5wYXNzd29yZENvbmZpcm0odGhpcy5wYXNzd29yZCwgdGhpcy5wYXNzd29yZENvbmZpcm1hdGlvbikKICAgICAgICApIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGxldCByZXMgPSBhd2FpdCBheGlvcy5wb3N0KCdodHRwczovL2hhdXRlLWxvaXJlLm9yZy9hcGkvdXNlcicsIHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLmZpcnN0TmFtZSArICIgIisgdGhpcy5sYXN0TmFtZSwKICAgICAgICAgICAgICAgICAgICBmaXJzdE5hbWU6IHRoaXMuZmlyc3ROYW1lLAogICAgICAgICAgICAgICAgICAgIGxhc3ROYW1lOiB0aGlzLmxhc3ROYW1lLAogICAgICAgICAgICAgICAgICAgIGVtYWlsOiB0aGlzLmVtYWlsLAogICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLnBhc3N3b3JkLAogICAgICAgICAgICAgICAgICAgIHBheXJvbGw6IDAsCiAgICAgICAgICAgICAgICAgICAgcmV0YWlsZXI6IDAsCiAgICAgICAgICAgICAgICAgICAgbGF0aXR1ZGU6IDQ1LCAvL8OgIG1vZGlmaWVyCiAgICAgICAgICAgICAgICAgICAgbG9uZ2l0dWRlOiAwLCAgLy8gw6AgbW9kaWZpZXIKICAgICAgICAgICAgICAgICAgICBhZGRyZXNzOiB0aGlzLmFkcmVzcywKICAgICAgICAgICAgICAgICAgICBwb3N0YWxDb2RlOiB0aGlzLnBvc3RDb2RlLAogICAgICAgICAgICAgICAgICAgIGNpdHk6IHRoaXMuY2l0eQogICAgICAgICAgICAgICAgfSkKCiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgICAgICAgY29uc29sZS5sb2coImNvbXB0ZSBjcsOpw6kgYXZlYyBzdWNjw6hzIik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICAgICAgICAgICAgdmFyIHRhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI2Vycm9yLW1lc3NhZ2UiKTsKICAgICAgICAgICAgICAgIHRhLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29uc29sZS5sb2coInBhcyBvayIpCiAgICAgICAgICAgIHZhciB0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI2Vycm9yLW1lc3NhZ2UiKTsKICAgICAgICAgICAgdC5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKICAgICAgICB9CgogICAgICB9LAogICAgICBlbWFpbFZhbGlkYXRpb24obWFpbCkgewogICAgICAgIC8vZXNsaW50LWRpc2FibGUtbmV4dC1saW5lCiAgICAgICAgbGV0IHJlZyA9IC9eXHcrKFtcLi1dP1x3KykqQFx3KyhbXC4tXT9cdyspKihcLlx3ezIsM30pKyQvOwogICAgICAgIHJldHVybiByZWcudGVzdChtYWlsKTsKICAgICAgfSwKICAgICAgcGFzc3dvcmRWYWxpZGF0aW9uKHBhc3N3b3JkKSB7CiAgICAgICAgICAvL2VzbGludC1kaXNhYmxlLW5leHQtbGluZQogICAgICAgICAgbGV0IHJlZyA9IC9eKD89LipcZCkoPz0uKlthLXpdKSg/PS4qW0EtWl0pLns2LDIwfSQvOwogICAgICAgICAgcmV0dXJuIHJlZy50ZXN0KHBhc3N3b3JkKTsKICAgICAgfSwKICAgICAgcGFzc3dvcmRDb25maXJtKHBhc3N3b3JkLCBwYXNzd29yZENvbmZpcm1hdGlvbikgewogICAgICAgICAgcmV0dXJuIHBhc3N3b3JkID09IHBhc3N3b3JkQ29uZmlybWF0aW9uOwoKICAgICAgfQogICAgICAKICB9Cgp9Cg=="},{"version":3,"sources":["Register.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA","file":"Register.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div class=\"text.center\">\n        <div class=\"d-flex justify-content-center\" id=\"register-form\">\n            \n            <form  @submit.prevent=\"register\">\n                <br><br><br><br>\n                <div>\n                    <label for=\"name\">\n                        Nom : \n                    </label>\n                    <input type=\"text\" name=\"firstName\" placeholder=\"Prénom\" id=\"firstName\" v-model=\"firstName\">\n                    <input type=\"text\" name=\"lastName\" placeholder=\"Nom\" id=\"lastName\" v-model=\"lastName\">\n                </div>\n                <div>\n                    <label for=\"adress\">\n                        Adresse : \n                    </label>\n                    <input type=\"text\" name=\"adress\" placeholder=\"Adresse\" id=\"adress\" v-model=\"adress\"><br>\n                    <input type=\"text\" name=\"postCode\" placeholder=\"Code postal\" id=\"postCode\" v-model=\"postCode\">\n                    <input type=\"text\" name=\"city\" placeholder=\"Ville\" id=\"city\" v-model=\"city\">\n                </div>\n                <div>\n                    <label for=\"email\">\n                        Email : \n                    </label>\n                    <input type=\"text\" name=\"email\" placeholder=\"email\" id=\"email\" v-model=\"email\">\n                </div>\n                <div>\n                    <label for=\"password\">\n                        Mot de passe : \n                    </label>\n                    <input type=\"password\" name=\"password\" placeholder=\"Mot de passe\" id=\"password\" v-model=\"password\">\n                </div>\n                <div>\n                    <label for=\"password\">\n                        Confirmation mot de passe : \n                    </label>\n                    <input type=\"password\" name=\"passwordConfirmation\" placeholder=\"Mot de passe\" id=\"passwordConfirmation\" v-model=\"passwordConfirmation\">\n                </div>\n                <div>\n                    <button class=\"btn btn-dark\" type=\"register\">Register</button>\n                </div>\n            </form>\n            \n        </div>\n        <div id=\"error-message\">\n            <p>Votre compte n'a pas pu être créé.</p>\n        </div>\n    </div>\n</template>\n\n<script>\n//import {mapActions} from 'vuex';\nimport axios from 'axios';\n\nexport default {\n  name: 'Register',\n  data() {\n    return {\n        name: '',\n        firstName: '',\n        lastName: '',\n        adress: '',\n        postCode: '',\n        city: '',\n        email: '',\n        password: '',\n        passwordConfirmation: ''\n    }\n  }, \n  methods: {\n      async register() {\n        if (\n        this.emailValidation(this.email) && \n        this.passwordValidation(this.password) && \n        this.passwordConfirm(this.password, this.passwordConfirmation)\n        ) {\n            try {\n                let res = await axios.post('https://haute-loire.org/api/user', {\n                    name: this.firstName + \" \"+ this.lastName,\n                    firstName: this.firstName,\n                    lastName: this.lastName,\n                    email: this.email,\n                    password: this.password,\n                    payroll: 0,\n                    retailer: 0,\n                    latitude: 45, //à modifier\n                    longitude: 0,  // à modifier\n                    address: this.adress,\n                    postalCode: this.postCode,\n                    city: this.city\n                })\n\n            console.log(res.data);\n            console.log(\"compte créé avec succès\");\n            }\n            catch (e) {\n                console.log(e);\n                var ta = document.querySelector(\"#error-message\");\n                ta.style.display = \"block\";\n            }\n        } else {\n            console.log(\"pas ok\")\n            var t = document.querySelector(\"#error-message\");\n            t.style.display = \"block\";\n        }\n\n      },\n      emailValidation(mail) {\n        //eslint-disable-next-line\n        let reg = /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/;\n        return reg.test(mail);\n      },\n      passwordValidation(password) {\n          //eslint-disable-next-line\n          let reg = /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{6,20}$/;\n          return reg.test(password);\n      },\n      passwordConfirm(password, passwordConfirmation) {\n          return password == passwordConfirmation;\n\n      }\n      \n  }\n\n}\n</script>\n\n<style scoped>\n#error-message {\n    display: none;\n}\n\n</style>"]}]}